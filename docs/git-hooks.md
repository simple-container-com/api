# Git Hooks Documentation

## Pre-commit Hook

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞.

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

1. **Go Tests** - –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: `go test ./... -v -race -coverprofile=coverage.out`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏

2. **Code Formatting** - –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è: `gofmt -l .`
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å: `gofmt -w .`

3. **Go Vet** - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: `go vet ./...`
   - –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏

4. **Golangci-lint** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞: `brew install golangci-lint` (macOS)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –û–±—ã—á–Ω—ã–π –∫–æ–º–º–∏—Ç
```bash
git add .
git commit -m "feat: add new feature"
# Hook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
```

#### –û–±—Ö–æ–¥ hook (—Ç–æ–ª—å–∫–æ –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤!)
```bash
git commit -m "WIP: emergency fix" --no-verify
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-verify` —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö!

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

1. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ –æ—à–∏–±–∫–∏:**
   ```bash
   # Hook –ø–æ–∫–∞–∂–µ—Ç –∫–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –≤—Ä—É—á–Ω—É—é:**
   ```bash
   go test ./... -v
   ```

3. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏**

4. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞:**
   ```bash
   git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã"
   ```

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
gofmt -w .

# –î–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .

# –ö–æ–º–º–∏—Ç–∏—Ç—å
git commit -m "style: fix formatting"
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ hook –≤ –Ω–æ–≤–æ–º –∫–ª–æ–Ω–µ

Hook —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `.git/hooks/pre-commit` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```bash
chmod +x .git/hooks/pre-commit
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ hook

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

**–í–∞—Ä–∏–∞–Ω—Ç 1: –î–ª—è –æ–¥–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞**
```bash
git commit --no-verify -m "message"
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ**
```bash
mv .git/hooks/pre-commit .git/hooks/pre-commit.disabled
```

**–í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ:**
```bash
mv .git/hooks/pre-commit.disabled .git/hooks/pre-commit
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è hook –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (Test Coverage)
- üé® –°—Ç–∞—Ç—É—Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã go vet

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

```
üß™ Running pre-commit tests...

üì¶ Running Go tests...
‚úÖ All tests passed!

üìä Test Coverage: 12.8%

üé® Checking code formatting...
‚úÖ Code formatting is correct

üîç Running go vet...
‚úÖ go vet passed

‚ö†Ô∏è  golangci-lint not installed (optional)

‚úÖ All pre-commit checks passed! üéâ
```

### –ü—Ä–∏–º–µ—Ä –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

```
üß™ Running pre-commit tests...

üì¶ Running Go tests...
‚ùå Tests failed! Commit aborted.

‚ö†Ô∏è  Fix the failing tests before committing.
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ **–í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
2. ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥** —Å –ø–æ–º–æ—â—å—é `gofmt -w .`
3. ‚úÖ **–ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
4. ‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-verify`** –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. ‚úÖ **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø–æ–∫—Ä—ã—Ç–∏–µ–º** - —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ > 80%

### CI/CD Integration

Pre-commit hook –¥–æ–ø–æ–ª–Ω—è–µ—Ç CI/CD pipeline:
- **Local (pre-commit):** –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- **CI/CD:** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ push –≤ GitHub

–û–±–∞ —É—Ä–æ–≤–Ω—è –∑–∞—â–∏—Ç—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞! üõ°Ô∏è
